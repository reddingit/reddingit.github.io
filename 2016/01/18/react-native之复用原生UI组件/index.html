<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Give it five minutes"><title>React-Native之复用原生UI组件 | 5 minutes walk</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">React-Native之复用原生UI组件</h1><a id="logo" href="/.">5 minutes walk</a><p class="description">For a lifetime</p></div><div id="nav-menu"><a href="/." class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/about/"><i class="icon-about"> 关于</i></a><a href="/atom.xml"><i class="icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">React-Native之复用原生UI组件</h1><div class="post-meta">2016-01-18 | <span class="categories">分类于<a href="/categories/react-native/"> react-native</a></span></div><span data-disqus-identifier="2016/01/18/React-Native之复用原生UI组件/" class="disqus-comment-count"></span><div class="post-content"><p>原文：<a href="http://moduscreate.com/leverage-existing-ios-views-react-native-app/" target="_blank" rel="external">Leverage Existing iOS Views In Your React Native App</a></p>
<p><img src="http://moduscreate.com/wp-content/uploads/2015/10/StanRNscreenshot.png" alt=""></p>
<a id="more"></a>
<p>当React Native还在蹒跚学步的时候，自2008年3月开始的iOS原生应用开发已经走过了6个年头，正是君生我未生，我生君已老。然而老的好处就在于积累了许多的经验感悟，往往可以做到事半功倍。这么些年以来，iOS开发者向社区贡献了大量的开源组件，奋战在一线的APP开发公司也积累了恒河沙数的各种工具、类库。更重要的是苹果公司为原生应用开发提供了大量的基础组件。今天我们研究一下如何在React Native中使用iOS原生的UI View Controller。</p>
<h3 id="u753B_u4E2AAPP_u8349_u56FE_u5148"><a href="#u753B_u4E2AAPP_u8349_u56FE_u5148" class="headerlink" title="画个APP草图先"></a>画个APP草图先</h3><p>为了弄明白React Native中怎么调用iOS原生View Controller，我们先来确定一下本文中原生APP应该长个什么样。下图左侧，是将要显示在屏幕上的原生View Controller，它可以和右侧的React Native代码互相通信。</p>
<p><img src="http://moduscreate.com/wp-content/uploads/2015/10/image001.png" alt=""></p>
<p>我们需要创建一个React Native的模块（原生组件）来封装原生View Controller，以便于在React Native中使用它，以及二者之间的互相通信。如下图所示：</p>
<p><img src="http://moduscreate.com/wp-content/uploads/2015/10/image002.png" alt=""></p>
<p>在深入介绍之前，我们先来了解一下标准React Native iOS应用的组织结构。如下图所示：</p>
<p><img src="http://moduscreate.com/wp-content/uploads/2015/10/image003.png" alt=""></p>
<p>其中最重要的一个组件是UIViewController的实例。（AppDelegate中的rootViewController）</p>
<p>下一步要做的是把rootViewController作为AppDelegate的属性对外提供。这样其他的类就可以引用rootViewController，本文中就是指那些显示在屏幕上的UIViewController的实例。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> : <span class="title">UIResponder</span> &lt;<span class="title">UIApplicationDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIWindow</span> *window;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIViewController</span> *rootViewController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">RCTRootView *rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation</span><br><span class="line">                                                      moduleName:<span class="string">@"MCDJ"</span></span><br><span class="line">                                               initialProperties:<span class="literal">nil</span></span><br><span class="line">                                                   launchOptions:launchOptions];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">self</span><span class="variable">.window</span> = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[<span class="built_in">UIScreen</span> mainScreen]<span class="variable">.bounds</span>];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">UIViewController</span> *rootViewController = [[<span class="built_in">UIViewController</span> alloc] init];</span><br><span class="line">  rootViewController<span class="variable">.view</span> = rootView;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">self</span><span class="variable">.window</span><span class="variable">.rootViewController</span> = rootViewController;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Set reference to class property</span></span><br><span class="line">  <span class="keyword">self</span><span class="variable">.rootViewController</span> = rootViewController;</span><br><span class="line"></span><br><span class="line">  [<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</span><br></pre></td></tr></table></figure>
<h3 id="u539F_u751F_u7EC4_u4EF6_u6765_u4E86"><a href="#u539F_u751F_u7EC4_u4EF6_u6765_u4E86" class="headerlink" title="原生组件来了"></a>原生组件来了</h3><p>现在我们已经可以在外部引用rootViewController，是时候创建一个原生组件来包装我们想要在React Native中使用的view了。我们拿MPMediaPickerController作为栗子。MPMediaPickerController是用来显示iOS媒体库的，它是UIViewController的子类。MPMediaPickerController就是为了做栗子而生的，它是modal controller，同时也实现了MPMediaPickerControllerDelegate代理，正合我用。</p>
<p>下面是MediaController的样例。<br>注意：为了支持选择播放音频，需要引入AVAudioPlayer。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"RCTBridge.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"RCTEventDispatcher.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;MediaPlayer/MediaPlayer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">@import <span class="built_in">AVFoundation</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MediaController</span> : <span class="title">NSObject</span>&lt;<span class="title">RCTBridgeModule</span>,<span class="title">MPMediaPickerControllerDelegate</span>, <span class="title">AVAudioPlayerDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, retain) <span class="built_in">AVAudioPlayer</span> *player;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, retain) <span class="built_in">MPMediaPickerController</span> *mediaPicker;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>) showMediaPicker;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>下面的代码是两个主要的功能一些实现代码：</p>
<p>1 显示和隐藏媒体库</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)showMediaPicker &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">self</span><span class="variable">.mediaPicker</span> == <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.mediaPicker</span> = [[<span class="built_in">MPMediaPickerController</span> alloc] initWithMediaTypes:<span class="built_in">MPMediaTypeAnyAudio</span>];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.mediaPicker</span> setDelegate:<span class="keyword">self</span>];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.mediaPicker</span> setAllowsPickingMultipleItems:<span class="literal">NO</span>];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.mediaPicker</span> setShowsCloudItems:<span class="literal">NO</span>];</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.mediaPicker</span><span class="variable">.prompt</span> = <span class="string">@"Select song"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  AppDelegate *delegate = (AppDelegate *)[[<span class="built_in">UIApplication</span> sharedApplication] delegate];</span><br><span class="line">  [delegate<span class="variable">.rootViewController</span> presentViewController:<span class="keyword">self</span><span class="variable">.mediaPicker</span> animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> hideMediaPicker() &#123;</span><br><span class="line">  AppDelegate *delegate = (AppDelegate *)[[<span class="built_in">UIApplication</span> sharedApplication] delegate];</span><br><span class="line">  [delegate<span class="variable">.rootViewController</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 MPMediaPickerController与React Native通信</p>
<p>下面的代码是原生组件通过RCTBridge发出SongPlaying事件，并带上文件名称。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>) mediaPicker:(<span class="built_in">MPMediaPickerController</span> *)mediaPicker didPickMediaItems:(<span class="built_in">MPMediaItemCollection</span> *)mediaItemCollection &#123;</span><br><span class="line">  <span class="built_in">MPMediaItem</span> *mediaItem = mediaItemCollection<span class="variable">.items</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="built_in">NSURL</span> *assetURL = [mediaItem valueForProperty:<span class="built_in">MPMediaItemPropertyAssetURL</span>];</span><br><span class="line">  </span><br><span class="line">  [<span class="keyword">self</span><span class="variable">.bridge</span><span class="variable">.eventDispatcher</span> sendAppEventWithName:<span class="string">@"SongPlaying"</span> body:[mediaItem valueForProperty:<span class="built_in">MPMediaItemPropertyTitle</span>]];</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面的代码是React Native端订阅事件，并根据事件更新状态。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react-native'</span>);</span><br><span class="line"><span class="keyword">var</span> MediaController = <span class="built_in">require</span>(<span class="string">'NativeModules'</span>).MediaController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> &#123;</span><br><span class="line">  AppRegistry,</span><br><span class="line">  StyleSheet,</span><br><span class="line">  Text,</span><br><span class="line">  TouchableHighlight,</span><br><span class="line">  View,</span><br><span class="line">  NativeAppEventEmitter</span><br><span class="line">&#125; = React;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MCDJ</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.state = <span class="keyword">this</span>.getInitialState();</span><br><span class="line">        <span class="keyword">this</span>.bindMethods();</span><br><span class="line">    &#125;</span><br><span class="line">    bindMethods() &#123;</span><br><span class="line">        <span class="keyword">if</span> (! <span class="keyword">this</span>.bindableMethods) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;   </span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> methodName <span class="keyword">in</span> <span class="keyword">this</span>.bindableMethods) &#123;</span><br><span class="line">            <span class="keyword">this</span>[methodName] = <span class="keyword">this</span>.bindableMethods[methodName].bind(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getInitialState() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            songPlaying : <span class="string">'None'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="comment">// Add Event Listener for SongPlaying event from MediaController</span></span><br><span class="line">        NativeAppEventEmitter.addListener(<span class="string">'SongPlaying'</span>, (songName) =&gt; <span class="keyword">this</span>.setState(&#123;songPlaying : songName&#125;))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>下面是MediaController的代码实现，仅供参考。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"MediaController.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"AppDelegate.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MediaController</span></span></span><br><span class="line"></span><br><span class="line">RCT_EXPORT_MODULE();</span><br><span class="line"></span><br><span class="line"><span class="keyword">@synthesize</span> bridge = _bridge;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)showMediaPicker &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">self</span><span class="variable">.mediaPicker</span> == <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.mediaPicker</span> = [[<span class="built_in">MPMediaPickerController</span> alloc] initWithMediaTypes:<span class="built_in">MPMediaTypeAnyAudio</span>];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.mediaPicker</span> setDelegate:<span class="keyword">self</span>];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.mediaPicker</span> setAllowsPickingMultipleItems:<span class="literal">NO</span>];</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.mediaPicker</span> setShowsCloudItems:<span class="literal">NO</span>];</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.mediaPicker</span><span class="variable">.prompt</span> = <span class="string">@"Select song"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  AppDelegate *delegate = (AppDelegate *)[[<span class="built_in">UIApplication</span> sharedApplication] delegate];</span><br><span class="line">  [delegate<span class="variable">.rootViewController</span> presentViewController:<span class="keyword">self</span><span class="variable">.mediaPicker</span> animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>) mediaPicker:(<span class="built_in">MPMediaPickerController</span> *)mediaPicker didPickMediaItems:(<span class="built_in">MPMediaItemCollection</span> *)mediaItemCollection &#123;</span><br><span class="line">  <span class="built_in">MPMediaItem</span> *mediaItem = mediaItemCollection<span class="variable">.items</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="built_in">NSURL</span> *assetURL = [mediaItem valueForProperty:<span class="built_in">MPMediaItemPropertyAssetURL</span>];</span><br><span class="line">  </span><br><span class="line">  [<span class="keyword">self</span><span class="variable">.bridge</span><span class="variable">.eventDispatcher</span> sendAppEventWithName:<span class="string">@"SongPlaying"</span> body:[mediaItem valueForProperty:<span class="built_in">MPMediaItemPropertyTitle</span>]];</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">NSError</span> *error;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">self</span><span class="variable">.player</span> = [[<span class="built_in">AVAudioPlayer</span> alloc] initWithContentsOfURL:assetURL error:&amp;error];</span><br><span class="line">  [<span class="keyword">self</span><span class="variable">.player</span> setDelegate:<span class="keyword">self</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (error) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [error localizedDescription]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.player</span> play];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  hideMediaPicker();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>) mediaPickerDidCancel:(<span class="built_in">MPMediaPickerController</span> *)mediaPicker &#123;</span><br><span class="line">  hideMediaPicker();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark RCT_EXPORT</span></span><br><span class="line"></span><br><span class="line">RCT_EXPORT_METHOD(showSongs) &#123;</span><br><span class="line">  [<span class="keyword">self</span> showMediaPicker];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark private-methods</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> hideMediaPicker() &#123;</span><br><span class="line">  AppDelegate *delegate = (AppDelegate *)[[<span class="built_in">UIApplication</span> sharedApplication] delegate];</span><br><span class="line">  [delegate<span class="variable">.rootViewController</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/iOS/">iOS</a><a href="/tags/react/">react</a><a href="/tags/react-native/">react native</a></div><div class="post-nav"><a href="/2016/01/16/React-Native之Bridge/" class="next">React-Native之Bridge<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = '5minuteswalk';
var disqus_identifier = '2016/01/18/React-Native之复用原生UI组件/';
var disqus_title = 'React-Native之复用原生UI组件';
var disqus_url = 'http://5minsred.com/2016/01/18/React-Native之复用原生UI组件/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//5minuteswalk.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://5minsred.com"/></form></div><div class="widget"><div class="widget-title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/react-native/">react-native</a></li></ul></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/react-native/" style="font-size: 15px;">react native</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/react-native-bridge/" style="font-size: 15px;">react native bridge</a></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/01/18/React-Native之复用原生UI组件/">React-Native之复用原生UI组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/16/React-Native之Bridge/">React-Native之Bridge</a></li></ul></div><div class="widget"><div class="widget-title">最近评论</div><script type="text/javascript" src="//5minuteswalk.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">友情链接</div></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">5 minutes walk.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"></div></body></html>